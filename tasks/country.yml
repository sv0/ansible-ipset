---
- name: Create {{ inventory_dir }}/cache directory
  file:
    path: "{{ inventory_dir }}/cache"
    state: directory
  delegate_to: localhost

- name: Download countries networks list
  local_action:
    get_url:
      url: "http://www.ipdeny.com/ipblocks/data/countries/{{ item }}.zone"
      dest: "{{ inventory_dir }}/cache/{{ item }}.zone"
  with_items: "{{ ipset_countries }}"

- name: Copy countries networks list
  copy:
    src: "{{ inventory_dir }}/cache/{{ item }}.zone"
    dest: "{{ ipset_config_file | dirname }}/{{ item }}.zone"
  with_items: "{{ ipset_countries }}"
